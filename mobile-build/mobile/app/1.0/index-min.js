KISSY.add("mobile/app/1.0/index",function(d,h){function a(c){if(this instanceof a)a.superclass.constructor.call(this,c),this.init();else return new a(c)}var b=window.history;a.ATTRS={viewpath:{value:"index.html",setter:function(c){return decodeURIComponent(c)}},forceReload:{value:!0},page:{value:null},direction:{value:"none"},anim:{value:!0},dataload:{value:"true"},param:{value:null},pageCache:{value:!1},tapTrigger:{value:"a"},animWrapperAutoHeightSetting:{value:!0},containerHeighTimmer:{value:!0},
basepath:{value:window.location.protocol+"//"+window.location.hostname+window.location.pathname.replace(/\/[^\/]+$/i,"").replace(/\/$/,"")+"/"},initPostData:{value:null},signet:{value:{level:0,viewpath:"",hisurl:"",lastviewpath:"",forward:0,scrollTop:0}},fullRangeWidth:{value:function(){return document.body.offsetWidth}},webkitOptimize:{value:!0},positionMemory:{value:!0}};d.mix(a,{READY:{},STARTUP:{},TEARDOWN:{},INCLUDEONCE:{},DESTORY:{},PAGECACHE:{},PAGESCROLL:{},STORAGE:{},APP:null,AndroidHis:{},
includeOnce:function(c){if(this.slide){var a=this.APP.get("viewpath");d.isFunction(this.INCLUDEONCE[a])||(this.INCLUDEONCE[a]=c,c.call(this.APP,this.APP))}else c.call(this.APP)},destory:function(c){var a=this.APP.get("viewpath");d.isFunction(this.DESTORY[a])||(this.DESTORY[a]=c)},startup:function(c){if(this.slide){var a=this.APP.get("viewpath");d.isFunction(this.STARTUP[a])||(this.STARTUP[a]=c)}else c.call(this.APP)},ready:function(c){if(this.slide){var a=this.APP.get("viewpath");d.isFunction(this.READY[a])||
(this.READY[a]=c)}else c.call(this.APP)},teardown:function(c){var a=this.APP.get("viewpath");d.isFunction(this.TEARDOWN[a])||(this.TEARDOWN[a]=c)}});d.extend(a,d.Base,{init:function(){this.MS=this.constructor;d.one("#MS")?(d.UA.opera&&0<d.UA.opera&&this.set("animWrapperAutoHeightSetting",!0),this.slide=new h("MS",{autoSlide:!1,effect:this.get("anim")?"hSlide":"none",touchmove:!1,adaptive_fixed_width:!0,contentClass:"MS-con",speed:450,pannelClass:"MS-pal",animWrapperAutoHeightSetting:this.get("animWrapperAutoHeightSetting"),
webkitOptimize:this.get("webkitOptimize"),adaptive_width:this.get("fullRangeWidth")}),this.positionTimmer=null,this.get("containerHeighTimmer")&&this.slide.addHeightTimmer(),this.bindEvent(),this.initLoad()):this.set("page",d.one("body"));this.initPageStorage();this.set("storage",this.MS.STORAGE[this.get("viewpath")]||{});a.APP=this;return this},callDestory:function(){var c=this.MS.DESTORY[this.get("signet").lastviewpath];d.isFunction(c)&&c.call(this,this);return this},initPageStorage:function(){var c=
this.get("viewpath");if(!d.isObject(this.MS.STORAGE[c])){var a=function(){};d.augment(a,d.Base.Attribute,d.EventTarget);this.MS.STORAGE[c]=new a}},callReady:function(c){var a=this;d.isUndefined(c)&&(c=a.get("viewpath"));var b=a.MS.READY[c];d.isFunction(b)&&setTimeout(function(){b.call(a)},200);return this},callStartup:function(c){d.isUndefined(c)&&(c=this.get("viewpath"));var a=this.MS.STARTUP[c],b=this.get("param");this.set("param",null);this.set("storage",this.MS.STORAGE[c]||{});d.isFunction(a)&&
a.call(this,b);return this},callTeardown:function(c){d.isUndefined(c)&&(c=this.get("viewpath"));if(""!==c){var a=this.MS.TEARDOWN[c];this.rememberPosition(c);return d.isFunction(a)?a.call(this,this):!0}},rememberPosition:function(c){this.MS.PAGESCROLL[c]=d.DOM.scrollTop()},recallPosition:function(){if(this.get("positionMemory")){var c=this.MS.PAGESCROLL[this.get("viewpath")];c&&0===d.DOM.scrollTop()&&setTimeout(function(){d.Anim(window,{scrollTop:c},0.5,"easeBoth",function(){}).run()},200)}},initLoad:function(){d.isUndefined(d.getHash().viewpath)||
this.set("viewpath",d.getHash().viewpath);d.isNull(this.get("initPostData"))||(this.__post=this.get("initPostData"));this._go(this.get("viewpath"),"none");var c=this.formatUrlTail(this.get("viewpath"),d.getHash()),a={level:0,viewpath:this.get("viewpath"),hisurl:c,forward:0,lastviewpath:"",scrollTop:d.DOM.scrollTop()};this.set("signet",a);b.replaceState(a,"",c);this.set("viewpath",d.getHash().viewpath)},rollback:function(){var c=this.formatUrlTail(this.get("viewpath"),d.getHash()),a={level:0,viewpath:this.get("viewpath"),
hisurl:c,forward:0,lastviewpath:"",scrollTop:d.DOM.scrollTop()};this.set("signet",a);b.replaceState(a,"",c);this.set("viewpath",d.getHash().viewpath)},loading:function(){var a=this,b=d.one("#MS-loading"),b=b?b:d.Node('<div id="MS-loading" style="display:none"><img src="http://img04.taobaocdn.com/tps/i4/T1aIsKXmReXXa679Pe-40-40.gif" /></div>').appendTo("body");b.one("img").css({"margin-top":"5px"});b.css({display:"none",position:"fixed",height:"50px",width:"50px",top:"50%",left:"50%","margin-top":"-25px",
"margin-left":"-25px","border-radius":"6px","text-align":"center","background-color":"white",opacity:0.7});a.loadingTimer=setTimeout(function(){b.css({display:"block"});a.loadingTimer=null},350);return a},closeLoading:function(){this.loadingTimer&&clearTimeout(this.loadingTimer);var a=d.one("#MS-loading");a&&a.css({display:"none"});return this},getUrlPrefix:function(){var a=window.location;return a.pathname.replace(/\/.+\//i,"").replace("/","")+a.search},formatUrlTail:function(a,b){d.isUndefined(b)&&
(b="");d.isString(b)&&(b=d.unparam(b));var e=d.setHash(d.merge(b,{viewpath:encodeURIComponent(a)}));return this.getUrlPrefix()+e.replace(/^.+#/i,"#")},setRouteHash:function(a,g){this.set("viewpath",a);d.isUndefined(g)&&(g="");d.isString(g)&&(g=d.unparam(g));var e=this.formatUrlTail(a,d.getHash()),e={level:this.get("signet").level+1,viewpath:a,hisurl:d.setHash(decodeURIComponent(e),g),forward:1,lastviewpath:a,scrollTop:d.DOM.scrollTop()},f=window.location,f=f.protocol+"//"+f.hostname+f.pathname+f.search,
f=d.setHash(f,d.merge({viewpath:encodeURIComponent(a)},g));d.UA.android&&4.3>d.UA.android?window.location.href=f:(this.doHashChange(a,g),b.replaceState(e,"",f))},doHashChange:function(a,b){var e=d.setHash(d.merge({stamp:d.now(),viewpath:encodeURIComponent(a)},b)).match(/#.*$/i)[0];window.location.hash=e},bindEvent:function(){var a=this;if(d.UA.android&&4.3>d.UA.android){var g=d.getHash().viewpath?d.getHash().viewpath:a.get("viewpath");a.MS.AndroidHis[g]=1}a.slide.con.delegate("click",a.get("tapTrigger"),
function(b){var g=d.one(b.currentTarget);if(!d.isUndefined(g.attr("target"))&&""!==g.attr("target")||/^javascript:/i.test(g.attr("href")))return"top"==g.attr("target")&&(window.location.href=g.attr("href"),b.preventDefault()),!0;a.__clickEvent=!0;var h=g.attr("href"),g=g.attr("data-param");if(""===h)return!0;a.setRouteHash(h,g);b.preventDefault()});d.Event.on(window,"hashchange",function(){var g=a.get("signet"),f=decodeURIComponent(d.getHash().viewpath);a.set("viewpath",f);var h=!1,h=a.__clickEvent&&
!0===a.__clickEvent?!0:!1;delete a.__clickEvent;d.isUndefined(f)||(a.formatUrlTail(f,d.getHash()),d.UA.android&&4.3>d.UA.android?a._androidHistoryMan(h):d.isUndefined(b.state)||d.isUndefined(b.state.level)?(a._go(f,"none"),a.recordSignet(0,f)):0===a.get("signet").forward&&0<b.state.forward?(a.next(f),a.recordSignet(1,f)):b.state.level>g.level?0<a.get("signet").forward&&0>b.state.forward?(a.prev(f),a.recordSignet(1,f,-1)):(a.next(f),a.recordSignet(1,f)):(0<a.get("signet").forward&&0>b.state.forward?
a.prev():0>a.get("signet").forward&&0<b.state.forward?a.next(f,function(){a.callDestory();a.slide.remove(a.slide.length-2)}):a.prev(function(){a.recallPosition()}),a.recordSignet(-1,f,b.state.forward)))})},recordSignet:function(a,b,e){d.isUndefined(a)&&(a=0,b=d.getHash().viewpath,e=1);d.isUndefined(b)&&(b=d.getHash().viewpath,e=1);d.isUndefined(e)&&(e=1);var f=this.get("signet").level,h=this.formatUrlTail(b,d.getHash()),a={level:f+a,viewpath:b,hisurl:h,forward:e,lastviewpath:this.get("signet").viewpath,
scrollTop:d.DOM.scrollTop()};this.set("signet",a);return a},destory:function(){},_go:function(a,b,e){if(!1===this.callTeardown(this.get("signet").viewpath))return this.rollback(),this;d.isUndefined(b)&&(b="next",e=function(){});d.isFunction(b)&&(e=b,b="next");d.isUndefined(e)&&(e=function(){});this.loadData(a,b,e)},postback:function(a){this.__post=a.data;d.isString(a.path)?this.back(a.path,a.data,a.callback):this.back(a.data,a.callback)},postforward:function(a){this.__post=a.data;d.isString(a.path)?
this.forward(a.path,a.data,a.callback):this.forward(a.data,a.callback)},back:function(a,g,e){d.isUndefined(a)&&(a=void 0,g={},e=function(){});d.isUndefined(g)&&(g={},e=function(){});d.isFunction(g)&&(e=g,g={});d.isObject(a)&&(g=a,e=function(){},a=void 0);d.isObject(g)&&d.isUndefined(e)&&(e=function(){});d.isString(g)&&(g=d.unparam(g));d.isString(a)&&(a=encodeURIComponent(a));this.set("param",d.merge(g,{from:this.get("signet").viewpath}));d.isString(a)?(this.prev.apply(this,[a,g,e]),a=this.recordSignet(1,
a,-1),b.pushState(a,"",d.setHash(a.hisurl,g))):b.back();this.set("viewpath",d.getHash().viewpath);return this},forward:function(a,g,e){d.isUndefined(g)&&(g={},e=function(){});d.isFunction(g)&&(e=g,g={});d.isObject(g)&&d.isUndefined(e)&&(e=function(){});d.isString(g)&&(g=d.unparam(g));this.set("param",d.merge(g,{from:this.get("signet").viewpath}));a=encodeURIComponent(a);this.next.apply(this,[a,g,e]);a=this.recordSignet(1,a);b.pushState(a,"",d.setHash(a.hisurl,g));this.set("viewpath",d.getHash().viewpath);
return this},_androidHistoryMan:function(a,b){var e=this;d.isUndefined(b)&&(b=e.get("viewpath"));if(a||!(b in e.MS.AndroidHis))e.next(b),e.recordSignet(1,b);else{e.prev(b,function(){e.recallPosition()});e.recordSignet(1,b,-1);for(var f in e.MS.AndroidHis)1==e.MS.AndroidHis[f]&&delete e.MS.AndroidHis[f]}for(var h in e.MS.AndroidHis)e.MS.AndroidHis[h]=null;e.MS.AndroidHis[b]=1},next:function(a,b){var e=this;d.isFunction(a)&&(b=a,a=void 0);d.isUndefined(b)&&(b=function(){});if(d.isUndefined(a)){if(!1===
e.callTeardown(e.get("signet").viewpath))return e.rollback(),this;e.slide.removeHeightTimmer();e.get("animWrapperAutoHeightSetting")&&window.scrollTo(0,0);e.slide.next(function(){e.get("containerHeighTimmer")&&e.slide.addHeightTimmer();d.isFunction(b)&&b.call(e.slide,e.slide);e.get("forceReload")&&e.slide.remove(e.slide.length-2);setTimeout(function(){e.callReady()},0)});e.set("page",e.slide.getCurrentPannel());setTimeout(function(){e.callStartup()},0)}else e._go(a,"next",b)},prev:function(a,b){var e=
this;d.isFunction(a)&&(b=a,a=void 0);d.isUndefined(b)&&(b=function(){});!d.isString(a)&&e.get("forceReload")&&(a=e.get("viewpath"));if(d.isUndefined(a)){if(!1===e.callTeardown(e.get("signet").viewpath))return e.rollback(),this;e.slide.removeHeightTimmer();e.slide.previous(function(){e.get("containerHeighTimmer")&&e.slide.addHeightTimmer();e.callDestory();this.removeLast();d.isFunction(b)&&b.call(e.slide,e.slide);setTimeout(function(){e.callReady()},0)});e.set("page",e.slide.getCurrentPannel());setTimeout(function(){e.callStartup()},
0)}else e._go(a,"prev",b)},getAjaxPath:function(a){return this.get("basepath")+a},loadData:function(a,b,e){var f=this;d.isUndefined(b)&&(b="next",e=function(){});d.isFunction(b)&&(e=b,b="next");d.isUndefined(e)&&(e=function(){});var h=function(a){f.closeLoading();var c=f.get("page"),h=d.Node('<div class="MS-pal">'+a+"</div>");f.set("page",h);switch(b){case "prev":f.slide.add(h,f.slide.currentTab);f.slide.relocateCurrentTab(f.slide.currentTab+1);d.execScript(a);setTimeout(function(){f.initPageStorage();
f.callStartup()},0);setTimeout(function(){f.slide.removeHeightTimmer();f.slide.previous(function(){f.get("containerHeighTimmer")&&f.slide.addHeightTimmer();f.callDestory();d.isFunction(e)&&e.call(f.slide,f.slide);setTimeout(function(){f.callReady()},0);this.removeLast()})},150);break;case "next":f._fixScrollTopBefore(h,c);f.slide.add(h);d.execScript(a);setTimeout(function(){f.initPageStorage();f.callStartup()},0);setTimeout(function(){f.slide.removeHeightTimmer();f.get("animWrapperAutoHeightSetting")&&
window.scrollTo(0,0);f.slide.next(function(){f.callDestory();d.isFunction(e)&&e.call(f.slide,f.slide);f.get("forceReload")&&f.slide.remove(f.slide.length-2);setTimeout(function(){f.callReady()},0);f._fixScrollTopAfter(h,c)})},150);break;case "none":f.slide.add(h,f.slide.currentTab);f.callDestory();d.execScript(a);setTimeout(function(){f.initPageStorage();f.callStartup()},0);e.call(f.slide,f.slide);setTimeout(function(){f.callReady()},0);f.slide.removeLast()}},i=function(b){b=b.replace(/\r/mig,"$123").replace(/\n/g,
"$456").replace(/.*<\!--kdk{{--\>/i,"").replace(/<\!--kdk}}--\>.*$/i,"");b=b.replace(/\$123/g,"\r").replace(/\$456/g,"\n");f.MS.PAGECACHE[a]=b;h(b)},j=f.getAjaxPath(decodeURIComponent(a));f.loading();f.__post?(d.io.post(j,f.__post,i),delete f.__post):f.get("pageCache")&&!d.isUndefined(f.MS.PAGECACHE[a])?h(f.MS.PAGECACHE[a]):d.io.get(j,i)},_fixScrollTopBefore:function(a){if(!this.get("animWrapperAutoHeightSetting")){var b=d.DOM.scrollTop();a.css({"margin-top":b+"px"})}},_fixScrollTopAfter:function(a){var b=
this;if(!b.get("animWrapperAutoHeightSetting")){var e=a.parent(),f=function(){a.css({position:"absolute",top:0}).css({"margin-top":0,position:"relative","-webkit-backface-visibility":!1,left:0}).appendTo(e);b.get("containerHeighTimmer")&&b.slide.addHeightTimmer()};a.appendTo("body").css({"margin-top":0,position:"fixed",top:0,"-webkit-backface-visibility":!1,left:b.slide.con.offset().left+"px"});d.UA.opera&&0<d.UA.opera?(window.scrollTo(0,0),f()):d.Anim(window,{scrollTop:0},0.1,"easeNone",function(){f()}).run()}}});
return a},{requires:["./slide","base","ajax"]});
KISSY.add("mobile/app/1.0/kissy2yui",function(d){d.augment(d.Node,{_delegate:function(){d.isFunction(arguments[1])?this.delegate(arguments[0],arguments[2],arguments[1]):this.delegate.apply(this,arguments);return this},indexOf:function(h){if(d.isUndefined(h))return null;h[0]&&(h=h[0]);var a=0;this.each(function(b,c){b[0]===h&&(a=c)});return a},size:function(){return this.length},set:function(d,a){"innerHTML"===d?this.html(a):this.attr(d,a);return this},get:function(d){var a=this,b={innerHTML:function(){return a.html()},
region:function(){return{height:a.height(),width:a.width()}}};if(d in b)return b[d]()},appendChild:function(){this.append.apply(this,arguments);return this},setStyle:function(d,a){this.css.apply(this,arguments);return this},setStyles:function(d){this.css.apply(this,arguments);return this},cloneNode:function(){return this.clone.apply(this,arguments)}});d.Node.create=function(h){return d.Node(h)}},{requires:["node","event"]});
KISSY.add("mobile/app/1.0/slide",function(d){var h=function(){if(!(this instanceof h))throw Error('please use "new Slide()"');this.init.apply(this,arguments)};h.plug=function(){};d.augment(h,d.Event.Target,{init:function(a,b){if(d.isObject(a))this.con=a;else if(/^#/i.test(a))this.con=d.one(a);else if(d.one("#"+a))this.con=d.one("#"+a);else if(d.one(a))this.con=d.one(a);else throw Error("Slide Container Hooker not found");this.buildParam(b);this.buildHTML();this.bindEvent();this.fire("ready",{index:0,
navnode:this.tabs.item(0),pannelnode:this.pannels.item(0)});if(this.reverse){var c;c=this.previous;this.previous=this.next;this.next=c}if(this.carousel)for(c=0;c<this.colspan;c++)this.fix_for_transition_when_carousel(2*c);this.fixSlideSize();this.layerSlide&&this.initLayer();return this},setWrapperSize:function(a){var b=this;d.isUndefined(a)&&(a=0);b.pannels=b.con.all("."+b.contentClass+" div."+b.pannelClass);b.length=b.pannels.length;({none:function(){},vSlide:function(){var c=b.animcon.get("region");
b.animwrap.setStyles({height:(b.length+a)*c.height/b.colspan+"px"})},hSlide:function(){var c=b.animcon.get("region");b.animwrap.setStyles({width:(b.length+a)*c.width/b.colspan+"px"})},fade:function(){}})[b.effect]();d.isUndefined(a)||b.relocateCurrentTab();return this},add:function(a,b){var c=this;if(d.isUndefined(b)||b>c.length)b=c.length;d.isString(a)&&(a=d.one(a));c.transitions&&a.css({visibility:"hidden"});b==c.length?(setTimeout(function(){c.setWrapperSize(1)},0),a.insertAfter(c.pannels[b-1])):
a.insertBefore(c.pannels[b]);c.setWrapperSize();c.fixSlideSize(c.currentTab);c.transitions&&a.css({visibility:""});return this},remove:function(a){if(1!==this.length)return a<=this.currentTab&&(this.currentTab--,this.length--),this.transitions&&this.con.css({display:"none"}),d.one(this.pannels[a]).remove(),this.setWrapperSize(),this.transitions&&this.con.css({display:"block"}),this.fixSlideSize(this.currentTab),this},removeLast:function(){this.remove(this.length-1);return this},renderLazyData:function(a){a.setStyle("display",
"none");if("1"!=a.attr("lazy-data")){a.attr("lazy-data","1");d.stamp(c);var b=a.get("innerHTML").replace(/&lt;/ig,"<").replace(/&gt;/ig,">"),c=d.Node.create("<div>"+b+"</div>");d.DOM.insertBefore(c,a);d.execScript(b)}},buildWrap:function(){this.animwrap=d.Node.create('<div style="position:absolute;"></div>');this.animwrap.set("innerHTML",this.animcon.get("innerHTML"));this.animcon.set("innerHTML","");this.animcon.appendChild(this.animwrap);this.pannels=this.con.all("."+this.contentClass+" div."+this.pannelClass);
return this},doEffectInit:function(){var a=this;({none:function(){a.pannels=a.con.all("."+a.contentClass+" div."+a.pannelClass);a.pannels.setStyles({display:"none"});a.pannels.item(a.defaultTab).setStyles({display:"block"})},vSlide:function(){a.buildWrap();var b=a.animcon.get("region");a.pannels.setStyles({"float":"none",overflow:"hidden"});a.animwrap.setStyles({height:a.length*b.height/a.colspan+"px",overflow:"hidden",top:-1*a.defaultTab*b.height+"px"})},hSlide:function(){a.buildWrap();var b=a.animcon.get("region");
a.pannels.setStyles({"float":"left",overflow:"hidden"});a.animwrap.setStyles({width:a.length*b.width/a.colspan+"px",overflow:"hidden",left:-1*a.defaultTab*b.width+"px"})},fade:function(){a.pannels=a.con.all("."+a.contentClass+" div."+a.pannelClass);a.pannels.setStyles({position:"absolute",zIndex:0});a.pannels.each(function(b,c){c==a.defaultTab?b.setStyles({opacity:1,display:"block"}):b.setStyles({opacity:0,diaplay:"none"})})}})[a.effect]();return this},buildHTML:function(){var a=this.con;this.tabs=
a.all("."+this.navClass+" "+this.triggerSelector);this.length=a.all("."+this.contentClass+" ."+this.pannelClass).size();a.one("."+this.navClass)||d.Node('<ul class="'+this.navClass+'" style="display:none"></ul>').appendTo(this.con);if(0===this.tabs.size()){for(var b=a.all("."+this.navClass),c="",g=0;g<this.length;g++){var e="";0===g&&(e=this.selectedClass);c+='<li class="'+e+'"><a href="javascript:void(0);">'+(g+1)+"</a></li>"}b.set("innerHTML",c)}this.tabs=a.all("."+this.navClass+" "+this.triggerSelector);
this.animcon=a.one("."+this.contentClass);this.animwrap=null;this.doEffectInit();this.fixSlideSize(this.currentTab);this.hightlightNav(this.getWrappedIndex(this.currentTab));!0===this.autoSlide&&this.play();return this},getCurrentPannel:function(){return d.one(this.pannels[this.currentTab])},renderWidth:function(){var a=this.animcon.get("region").width;"hSlide"==this.effect&&(a/=this.colspan);this.pannels.setStyles({width:a+"px"});return this},renderHeight:function(){var a=this.animcon.get("region").height;
"vSlide"==this.effect&&(a/=this.colspan);this.pannels.setStyles({height:a+"px"});return this},relocateCurrentTab:function(a){d.isUndefined(a)&&(a=this.currentTab);if("hSlide"==this.effect)return this.transitions?this.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+-1*a*this.animcon.get("region").width+"px,0,0)","-webkit-backface-visibility":"hidden"}):this.animwrap.setStyles({left:-1*a*this.animcon.get("region").width}),this.currentTab=a,this},fixSlideSize:function(a){this.adaptive_fixed_width&&
this.renderWidth();this.adaptive_fixed_height&&this.renderHeight();this.adaptive_fixed_size&&this.renderHeight().renderWidth();this.resetSlideSize(a);return this},removeHeightTimmer:function(){d.isNull(this.heightTimmer)||(clearInterval(this.heightTimmer),this.heightTimmer=null)},addHeightTimmer:function(){var a=this;d.isNull(a.heightTimmer)||(clearInterval(a.heightTimmer),a.heightTimmer=null);var b=function(){a.effect=="hSlide"&&a.animcon.setStyles({height:a.pannels.item(a.currentTab).get("region").height+
"px"})};a.heightTimmer=setInterval(b,100);b()},resetSlideSize:function(a){var b,c;if("undefined"==typeof a||null===a)a=this.currentTab;if(!("hSlide"!=this.effect&&"vSlide"!=this.effect))return"hSlide"==this.effect&&(b=this.adaptive_width?this.adaptive_width():this.animcon.get("region").width,c=this.pannels.item(a).get("region").height,b/=this.colspan,this.pannels.setStyles({width:b+"px",display:"block"}),this.animcon.setStyles({width:b*this.colspan+"px",overflow:"hidden"}),this.animWrapperAutoHeightSetting&&
this.animcon.setStyles({height:c+"px"})),"vSlide"==this.effect&&(b=this.pannels.item(a).get("region").width,c=this.adaptive_height?this.adaptive_height():this.animcon.get("region").height,c/=this.colspan,this.pannels.setStyles({height:c*this.colspan+"px",display:"block"}),this.animcon.setStyles({height:c*this.colspan+"px",overflow:"hidden"}),this.animWrapperAutoHeightSetting&&this.animcon.setStyles({width:b+"px"})),this},getWrappedIndex:function(a){var b=0;return b=this.carousel?a<this.colspan?this.length-
3*this.colspan+a:a>=this.length-this.colspan?a-(this.length-this.colspan):a-this.colspan:a},bindEvent:function(){var a=this;d.inArray(a.eventType,["click","mouseover","mouseenter"])&&a.con._delegate(a.eventType,function(b){b.halt();b=Number(a.tabs.indexOf(b.currentTarget));a.carousel&&(b=(b+1)%a.length);a.go(b);a.autoSlide&&a.stop().play()},"."+a.navClass+" "+a.triggerSelector);a.hoverStop&&(a.con._delegate("mouseover",function(){a.autoSlide&&a.stop()},"."+a.contentClass+" div."+a.pannelClass),a.con._delegate("mouseout",
function(){a.autoSlide&&a.play()},"."+a.contentClass+" div."+a.pannelClass));d.Event.on(window,"resize",function(){a.fixSlideSize(a.currentTab);a.relocateCurrentTab()});a.on("beforeSwitch",function(){if(this.layerSlide&&this.isAming())return false});if("ontouchstart"in document.documentElement){if(!a.touchmove)return this;a.con._delegate("touchstart",function(b){a.stop();a.touching=true;a.is_last()&&a.carousel&&a.fix_next_carousel();a.is_first()&&a.carousel&&a.fix_pre_carousel();a.startX=b.changedTouches[0].clientX;
a.startY=b.changedTouches[0].clientY;a.animwrap.setStyles({"-webkit-transition-duration":"0s"});a.startT=Number(new Date)},"."+a.contentClass);a.con._delegate("touchend",function(b){a.touching=false;var c=b.changedTouches[0].clientX,b=Number(a.animcon.get("region").width);a.deltaX=Math.abs(c-a.startX);var d=Math.abs(c)<Math.abs(a.startX),c=!d,c=a.carousel?false:a.is_last()&&d||a.is_first()&&c,e=function(){a.animwrap.setStyles({"-webkit-transition-duration":Number(a.speed)/2+"s","-webkit-transform":"translate3d("+
-1*a.currentTab*a.animcon.get("region").width/a.colspan+"px,0,0)"})},f=function(){var b=a.animcon.get("region").width/a.colspan,b=parseInt((a.deltaX-b/2)/b,10);if(d){if(b>=1&&a.length>2){a.currentTab=a.currentTab+b;if(a.currentTab>=a.length-1)a.currentTab=a.length-2}a.next()}else{if(b>=1&&a.length>2)a.currentTab=a.currentTab-b<=0?1:a.currentTab+-1*b;a.previous()}};if(a.touchmove&&a.deltaX<30)e();else{!c&&(a.touchmove&&a.deltaX>b/3||!a.touchmove&&a.carousel||!a.carousel&&a.touchmove&&a.effect=="hSlide"||
!a.touchmove&&!a.carousel||Number(new Date)-a.startT<550)?f():e();a.autoSlide&&a.play()}},"."+a.contentClass);a.touchmove&&(a.con._delegate("touchmove",function(b){if(!(b.touches.length>1)){a.deltaX=b.touches[0].clientX-a.startX;var c=a.is_last()&&a.deltaX<0||a.is_first()&&a.deltaX>0;if(!a.carousel&&a.effect=="hSlide"&&c)a.deltaX=a.deltaX/3;a.isScrolling=Math.abs(a.deltaX)<Math.abs(b.touches[0].clientY-a.startY)?true:false;if(!a.isScrolling){b.halt();a.stop();b=Number(a.animcon.get("region").width/
a.colspan);a.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+(a.deltaX-a.currentTab*b)+"px,0,0)"})}}},"."+a.contentClass),a.animwrap.on("webkitTransitionEnd",function(){}))}return this},initLayer:function(){var a=this;if(!("ontouchstart"in document.documentElement||0<d.UA.ie&&9>d.UA.ie)){var b="durationin,easingin,durationout,easingout,delayin,delayout,slideindirection,slideoutdirection,offsetin,offsetout,alpha,easeInStrong,easeOutStrong,easeBothStrong,easeNone,easeIn,easeOut,easeBoth,elasticIn,elasticOut,elasticBoth,backIn,backOut,backBoth,bounceIn,bounceOut,bounceBoth,left,top,right,bottom".split(","),
c={durationin:1E3,easingin:"easeIn",durationout:1E3,easingout:"easeOut",delayin:300,delayout:300,slideindirection:"right",slideoutdirection:"left",alpha:!0,offsetin:50,offsetout:50},g=function(a){var f=this,g=a.attr("rel").replace(/"'/ig,"").replace(RegExp("("+b.join("|")+")","ig"),'"$1"'),h=d.JSON.parse("{"+g+"}");d.each(c,function(a,b){var c=h[b];f[b]=void 0===c||null===c?a:c});this.el=a;this.left=Number(a.css("left").replace("px",""));this.top=Number(a.css("top").replace("px",""));this.animIn=
function(){var a=this,b=a.offsetin,c=a.slideindirection;({left:function(){a.el.css({left:a.left-b})},top:function(){a.el.css({top:a.top-b})},right:function(){a.el.css({left:a.left+b})},bottom:function(){a.el.css({top:a.top+b})}})[c]();setTimeout(function(){var b={};d.mix(b,{left:{left:a.left},top:{top:a.top},bottom:{top:a.top},right:{left:a.left}}[c]);a.alpha&&d.mix(b,{opacity:1});d.Anim(a.el,b,a.durationin/1E3,a.easingin,function(){}).run()},a.delayin);a.alpha&&a.el.css({opacity:0})};this.animOut=
function(){}};a.sublayers=[];a.pannels.each(function(b,c){("vSlide"==a.effect||"hSlide"==a.effect)&&b.css({position:"relative"});0===b.all('[alt="sublayer"]').length?a.sublayers[c]=[]:(void 0===a.sublayers[c]&&(a.sublayers[c]=[]),b.all('[alt="sublayer"]').each(function(b){a.sublayers[c].push(new g(b))}))});a.on("beforeSwitch",function(b){if(b.index===a.currentTab)return!1;a.subLayerRunin(b.index)});a.on("beforeTailSwitch",function(b){a.subLayerRunout(b.index)})}},subLayerRunin:function(a){d.each(this.sublayers[a],
function(a){a.animIn()})},subLayerRunout:function(a){d.each(this.sublayers[a],function(a){a.animOut()})},buildParam:function(a){var b=this;if(void 0===a||null===a)a={};d.each({autoSlide:!1,speed:500,timeout:3E3,effect:"none",eventType:"click",easing:"easeBoth",hoverStop:!0,selectedClass:"selected",conClass:"t-slide",navClass:"tab-nav",triggerSelector:"li",contentClass:"tab-content",pannelClass:"tab-pannel",carousel:!1,reverse:!1,touchmove:!1,adaptive_fixed_width:!1,adaptive_fixed_height:!1,adaptive_fixed_size:!1,
adaptive_width:!1,adaptive_height:!1,defaultTab:0,layerSlide:!1,layerClass:"tab-animlayer",colspan:1,animWrapperAutoHeightSetting:!0,webkitOptimize:!0},function(c,d){var e=a[d];b[d]=void 0===e||null===e?c:e});d.mix(b,{tabs:[],animcon:null,pannels:[],timmer:null,touching:!1});b.speed/=1E3;0!==b.defaultTab&&(b.defaultTab=Number(b.defaultTab)-1);b.carousel&&(b.defaultTab=b.colspan,b.effect="hSlide");b.currentTab=b.defaultTab;b.transitions="webkitTransition"in document.body.style&&b.webkitOptimize;return b},
fix_for_transition_when_carousel:function(a){"undefined"==typeof a&&(a=0);var b=this.con;this.animcon=this.con.one("."+this.contentClass);this.animwrap=this.animcon.one("div");this.pannels=b.all("."+this.contentClass+" div."+this.pannelClass);if("hSlide"==this.effect){var c=Number(this.animcon.get("region").width/this.colspan);this.animcon.get("region");this.animwrap.setStyle("width",this.pannels.size()*c+2*c);var d=this.pannels.item(a).cloneNode(!0),e=this.pannels.item(this.pannels.size()-1-a).cloneNode(!0);
this.animwrap.append(d);this.animwrap.prepend(e);this.transitions?this.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+-1*c*(a/2+1)+"px,0,0)","-webkit-backface-visibility":"hidden",left:"0"}):this.animwrap.setStyle("left",-1*c*(a/2+1))}this.pannels=b.all("."+this.contentClass+" div."+this.pannelClass);this.length=this.pannels.size();return this},isAming:function(){return this.anim?this.anim.isRunning():!1},previous:function(a){try{if(this.isAming()&&this.carousel)return this}catch(b){}var c=
this.currentTab+this.length-1-(this.colspan-1);c>=this.length-this.colspan+1&&(c%=this.length-this.colspan+1);if(this.carousel&&this.is_first())return this.fix_pre_carousel(),this.previous.call(this),this;this.go(c,a);return this},is_last:function(){return this.currentTab==this.length-(this.colspan-1)-1?!0:!1},is_first:function(){return 0===this.currentTab?!0:!1},next:function(a){try{if(this.isAming()&&this.carousel)return this}catch(b){}var c=this.currentTab+1;c>=this.length-this.colspan+1&&(c%=
this.length-this.colspan+1);if(this.carousel&&this.is_last())return this.fix_next_carousel(),this.next.call(this),this;this.go(c,a);return this},fix_next_carousel:function(){this.currentTab=this.colspan;var a=this.con;"none"!=this.effect&&(this.pannels=a.all("."+this.contentClass+" div."+this.pannelClass));a="-"+Number(this.animcon.get("region").width).toString()+"px";"hSlide"==this.effect&&(this.transitions?this.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+
a+",0,0)"}):this.animwrap.setStyle("left",a))},fix_pre_carousel:function(){this.currentTab=this.length-1-2*this.colspan+1;var a=this.con;"none"!=this.effect&&(this.pannels=a.all("."+this.contentClass+" div."+this.pannelClass));a="-"+(Number(this.animcon.get("region").width/this.colspan)*this.currentTab).toString()+"px";"hSlide"==this.effect&&(this.transitions?this.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+a+",0,0)"}):this.animwrap.setStyle("left",a))},
hightlightNav:function(a){if(this.carousel&&1<this.colspan)return this;this.tabs.item(a)&&(this.tabs.removeClass(this.selectedClass),this.tabs.item(a).addClass(this.selectedClass));return this},switch_to:function(a,b){var c=this,g=function(){d.isFunction(b)&&b.call(c,c);c.fire("afterSwitch",{index:c.currentTab,navnode:c.tabs.item(c.getWrappedIndex(c.currentTab)),pannelnode:c.pannels.item(c.currentTab)})};c.fire("beforeTailSwitch",{index:c.currentTab,navnode:c.tabs.item(c.getWrappedIndex(c.currentTab)),
pannelnode:c.pannels.item(c.currentTab)});c.hightlightNav(c.getWrappedIndex(a));c.fixSlideSize(a);c.autoSlide&&c.stop().play();a>=c.length&&(a%=c.length);if(a==c.currentTab)return this;if(c.anim)try{c.anim.stop(),c.anim=null}catch(e){}({none:function(a){c.pannels.setStyles({display:"none"});c.pannels.item(a).setStyles({display:"block"});g()},vSlide:function(a){c.transitions?(c.animwrap.setStyles({"-webkit-transition-duration":c.speed+"s","-webkit-transform":"translate3d(0,"+-1*a*c.animcon.get("region").height/
c.colspan+"px,0)","-webkit-backface-visibility":"hidden"}),c.anim=d.Anim(c.animwrap,{opacity:1},c.speed,c.easing,function(){g()})):c.anim=d.Anim(c.animwrap,{top:-1*a*c.animcon.get("region").height/c.colspan},c.speed,c.easing,function(){g()});c.anim.run()},hSlide:function(a){c.transitions?(c.animwrap.setStyles({"-webkit-transition-duration":c.speed+"s","-webkit-transform":"translate3d("+-1*a*c.animcon.get("region").width/c.colspan+"px,0,0)","-webkit-backface-visibility":"hidden"}),c.anim=d.Anim(c.animwrap,
{opacity:1},c.speed,c.easing,function(){g()})):c.anim=d.Anim(c.animwrap,{left:-1*a*c.animcon.get("region").width/c.colspan},c.speed,c.easing,function(){g()});c.anim.run()},fade:function(a){var b=c.currentTab;c.anim=d.Anim(c.pannels.item(a),{opacity:1},c.speed,c.easing,function(){c.pannels.item(b).setStyle("zIndex",0);c.pannels.item(a).setStyle("zIndex",1);c.pannels.item(b).setStyle("opacity",0);c.pannels.item(b).setStyles({display:"none"});g()});c.pannels.item(a).setStyles({display:"block"});c.pannels.item(a).setStyle("opacity",
0);c.pannels.item(b).setStyle("zIndex",1);c.pannels.item(a).setStyle("zIndex",2);c.anim.run()}})[c.effect](a);c.currentTab=a;c.fire("switch",{index:a,navnode:c.tabs.item(c.getWrappedIndex(a)),pannelnode:c.pannels.item(a)});var f=c.pannels.item(a).all(".data-lazyload");f&&f.each(function(a){c.renderLazyData(a)})},go:function(a,b){!1!==this.fire("beforeSwitch",{index:a,navnode:this.tabs.item(a),pannelnode:this.pannels.item(a)})&&(a+this.colspan>this.pannels.size()&&(a=this.pannels.size()-this.colspan),
this.switch_to(a,b));return this},play:function(){var a=this;null!==a.timer&&clearTimeout(a.timer);a.timer=setTimeout(function(){a.next().play()},Number(a.timeout));return this},stop:function(){clearTimeout(this.timer);this.timer=null;return this}});return h},{requires:["node","event","json","./util","./kissy2yui"]});
KISSY.add("mobile/app/1.0/util",function(d){d.mix(d,{setHash:function(d,a){var b,c;"object"==typeof d?(b=window.location.href,a=d):b=d;0>b.indexOf("#")&&(b+="#");var g=this.getHash(b);for(c in g)!(c in a)&&"viewpath"!==c&&delete g[c];for(c in a)g[c]=a[c];b=b.split("#")[0]+"#";for(c in g)b+=c+"="+g[c]+"&";return b=b.substr(0,b.length-1)},getHash:function(h){h=h||window.location.href;if(0>h.indexOf("#"))return{};h=h.split("#")[1];if(""===h)return{};"&"==h[h.length-1]&&(h=h.substr(0,h.length-1));h=h.replace(/"/ig,
"'");h=h.replace(/=/ig,'":"');h=h.replace(/&/ig,'","');return d.JSON.parse('{"'+(h+'"')+"}")},_globalEval:function(d){if(d&&/\S/.test(d)){var a=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],b=document.createElement("script");b.text=d;a.insertBefore(b,a.firstChild);setTimeout(function(){a.removeChild(b)},1)}},execScript:function(h){var a=RegExp(/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/ig),b=d.one("head").getDOMNode(),c,g,e,f,k,i=/\stype="(javascript)|(text)\/template"/i,
j=/\ssrc=(['"])(.*?)\1/i,l=/\scharset=(['"])(.*?)\1/i;for(a.lastIndex=0;c=a.exec(h);)if(e=(g=c[1])?g.match(j):!1,!g.match(i))if(e&&e[2]){c=document.createElement("script");c.src=e[2];if((f=g.match(l))&&f[2])c.charset=f[2];c.async=!0;b.appendChild(c)}else(k=c[2])&&0<k.length&&this._globalEval(k)},isDaily:function(){return/daily\.taobao\.net/.test(window.location.hostname)?!0:!1}})},{requires:["node","sizzle","json","uri"]});
